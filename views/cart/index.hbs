{{#extends 'base'}}

{{#block "content"}}
    <h1>My Shopping Cart</h1>

    {{!-- <form method="POST">
      <input type="hidden" name="_csrf" value="{{csrfToken}}"/>
      {{{form}}}
      <input type="submit" value="Select User" class="button__index--submit" />
    </form>

    <h1>Cart list</h1> --}}
    
    <ul class=''>
        {{#each cartItems}}
        <li class="">
            <h4>{{this.product.title}}</h4>
            <h5>Category: {{this.product.category.title}}</h5>
            <h5>Cost: {{ this.product.price }}</h5>
            <form method="POST" action="/cart/updateQuantity/{{this.product.id}}">
            <input type="hidden" name="_csrf" value="{{../csrfToken}}"/>
            <h5>Quantity:
                <input type="text" style="width:30px" name="newQuantity" value="{{this.quantity}}"/> 
               </h5>
               <input type="submit" value="Update Quantity" class="btn btn-success btn-sm"/>
            </form>
            <a href="/cart/remove/{{this.product.id}}" class="btn btn-danger btn-sm">Remove</a>
        </li>
        {{/each}}
    </ul>
{{/block}}

{{/extends}}